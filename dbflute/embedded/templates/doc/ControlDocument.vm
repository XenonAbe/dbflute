#
# @since DBFlute-0.9.0
#
#set ($database = $schemaData.database)
$database.enableDocumentOutputDirectory()

## - - - - - - - - - - - -
## Initialize properties.
## - - - - - - - - - - - -
$database.initializeVersion(90)
$database.initializeAdditionalPrimaryKey()
$database.initializeAdditionalUniqueKey()
$database.initializeAdditionalForeignKey()
$database.initializeClassificationDeployment()

## - - - - - -
## Schema HTML
## - - - - - -
## *the argument 'dataModel' might be unused on DBFlute
#if ($selector.isSchemaHtml())
#set ($outFile = "${selector.schemaHtmlFileName}")
  $generator.parse("doc/html/datamodel.vm", $outFile, "dataModel", $dataModel)
#end

## - - - - - - -
## History HTML
## - - - - - - -
#if ($selector.isHistoryHtml())
$selector.loadSchemaHistoryAsCore()
#if ($selector.existsSchemaHistory())
#set ($outFile = "${selector.historyHtmlFileName}")
$generator.parse("doc/html/diffmodel.vm", $outFile, "dataModel", $dataModel)
#end
#end

## - - - - - - - - - -
## SyncCheckDiff HTML
## - - - - - - - - - -
#if ($selector.isSyncCheckDiffHtml())
$selector.loadSchemaHistoryAsSchemaSyncCheck()
#if ($selector.existsSchemaHistory())
#set ($outFile = "${selector.schemaSyncCheckDiffHtmlFileName}")
$generator.parse("doc/html/diffmodel.vm", $outFile, "dataModel", $dataModel)
#end
#end

## - - - - - - - - - -
## AlterCheckDiff HTML
## - - - - - - - - - -
#if ($selector.isAlterCheckDiffHtml())
$database.enableMigrationOutputDirectory()
$selector.loadSchemaHistoryAsAlterCheck()
#if ($selector.existsSchemaHistory())
#set ($outFile = "${selector.alterCheckDiffHtmlFileName}")
$generator.parse("doc/html/diffmodel.vm", $outFile, "dataModel", $dataModel)
#end
$database.backToDocumentOutputDirectory()
#end
